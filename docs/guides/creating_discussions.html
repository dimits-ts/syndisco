

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Creating a Discussion &mdash; SynDisco 2.0.4 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css?v=2aa19091" />

  
    <link rel="shortcut icon" href="../_static/syndisco_logo.svg"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=adc66a14"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            SynDisco
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html#features">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html#installation">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/syndisco.html">syndisco package</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SynDisco</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Creating a Discussion</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/guides/creating_discussions.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Creating-a-Discussion">
<h1>Creating a Discussion<a class="headerlink" href="#Creating-a-Discussion" title="Link to this heading"></a></h1>
<p>The simplest task you can accomplish with this library is to create a small discussion between LLMs.</p>
<p>This guide will teach you the basic setup of the library. You will understand how to setup models, user-agents and how to coordinate them in a discussion. By the end of htis guide, you will be able to run a small discussion with a moderator and save it to the disk for persistence.</p>
<section id="Basics">
<h2>Basics<a class="headerlink" href="#Basics" title="Link to this heading"></a></h2>
<section id="The-Model">
<h3>The Model<a class="headerlink" href="#The-Model" title="Link to this heading"></a></h3>
<p>SynDisco can theoretically support any LLM, as long as it is wrapped in a <code class="docutils literal notranslate"><span class="pre">BaseModel</span></code> wrapper. The <code class="docutils literal notranslate"><span class="pre">BaseModel</span></code> class is a very simple interface with one method. This method gives the underlying LLM input, and returns its output to the library.</p>
<p>There already exists a <code class="docutils literal notranslate"><span class="pre">TransformersModel</span></code> class which handles models from the <code class="docutils literal notranslate"><span class="pre">transformers</span></code> python library. In 90% of your applications, this will be enough. We can load a TransformersModel using the following code:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">syndisco.model</span><span class="w"> </span><span class="kn">import</span> <span class="n">TransformersModel</span>

<span class="n">llm</span> <span class="o">=</span> <span class="n">TransformersModel</span><span class="p">(</span>
    <span class="n">model_path</span><span class="o">=</span><span class="s2">&quot;unsloth/Llama-3.2-3B-Instruct-bnb-4bit&quot;</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;test_model&quot;</span><span class="p">,</span>
    <span class="n">max_out_tokens</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/media/SSD_4TB_2/dtsirmpas/software/miniforge/envs/syndisco/lib/python3.13/site-packages/tqdm/auto.py:21: TqdmWarning: IProgress not found. Please update jupyter and ipywidgets. See https://ipywidgets.readthedocs.io/en/stable/user_install.html
  from .autonotebook import tqdm as notebook_tqdm
Device set to use cuda:1
</pre></div></div>
</div>
<p>This will download a small LLM from huggingface. You can substitute the model_path for any similar model in <a class="reference external" href="https://huggingface.co/">HuggingFace</a> supporting the Transformers library.</p>
</section>
<section id="Creating-personas">
<h3>Creating personas<a class="headerlink" href="#Creating-personas" title="Link to this heading"></a></h3>
<p>All <code class="docutils literal notranslate"><span class="pre">actors</span></code> can be defined by a <code class="docutils literal notranslate"><span class="pre">persona</span></code>, aka a set of attributes that define them. These attributes can be age, ethnicity, and even include special instructions on how they should behave.</p>
<p>Creating a persona programmatically is simple:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">syndisco.actors</span><span class="w"> </span><span class="kn">import</span> <span class="n">Persona</span>

<span class="n">persona_data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;Emma35&quot;</span><span class="p">,</span>
        <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">38</span><span class="p">,</span>
        <span class="s2">&quot;sex&quot;</span><span class="p">:</span> <span class="s2">&quot;female&quot;</span><span class="p">,</span>
        <span class="s2">&quot;education_level&quot;</span><span class="p">:</span> <span class="s2">&quot;Bachelor&#39;s&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sexual_orientation&quot;</span><span class="p">:</span> <span class="s2">&quot;Heterosexual&quot;</span><span class="p">,</span>
        <span class="s2">&quot;demographic_group&quot;</span><span class="p">:</span> <span class="s2">&quot;Latino&quot;</span><span class="p">,</span>
        <span class="s2">&quot;current_employment&quot;</span><span class="p">:</span> <span class="s2">&quot;Registered Nurse&quot;</span><span class="p">,</span>
        <span class="s2">&quot;special_instructions&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;personality_characteristics&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;compassionate&quot;</span><span class="p">,</span>
            <span class="s2">&quot;patient&quot;</span><span class="p">,</span>
            <span class="s2">&quot;diligent&quot;</span><span class="p">,</span>
            <span class="s2">&quot;overwhelmed&quot;</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;Giannis&quot;</span><span class="p">,</span>
        <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span>
        <span class="s2">&quot;sex&quot;</span><span class="p">:</span> <span class="s2">&quot;male&quot;</span><span class="p">,</span>
        <span class="s2">&quot;education_level&quot;</span><span class="p">:</span> <span class="s2">&quot;College&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sexual_orientation&quot;</span><span class="p">:</span> <span class="s2">&quot;Pansexual&quot;</span><span class="p">,</span>
        <span class="s2">&quot;demographic_group&quot;</span><span class="p">:</span> <span class="s2">&quot;White&quot;</span><span class="p">,</span>
        <span class="s2">&quot;current_employment&quot;</span><span class="p">:</span> <span class="s2">&quot;Game Developer&quot;</span><span class="p">,</span>
        <span class="s2">&quot;special_instructions&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;personality_characteristics&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;strategic&quot;</span><span class="p">,</span>
            <span class="s2">&quot;meticulous&quot;</span><span class="p">,</span>
            <span class="s2">&quot;nerdy&quot;</span><span class="p">,</span>
            <span class="s2">&quot;hyper-focused&quot;</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">},</span>
<span class="p">]</span>

<span class="n">personas</span> <span class="o">=</span> <span class="p">[</span><span class="n">Persona</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span> <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">persona_data</span><span class="p">]</span>

<span class="k">for</span> <span class="n">persona</span> <span class="ow">in</span> <span class="n">personas</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">persona</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#34;username&#34;: &#34;Emma35&#34;, &#34;age&#34;: 38, &#34;sex&#34;: &#34;female&#34;, &#34;sexual_orientation&#34;: &#34;Heterosexual&#34;, &#34;demographic_group&#34;: &#34;Latino&#34;, &#34;current_employment&#34;: &#34;Registered Nurse&#34;, &#34;education_level&#34;: &#34;Bachelor&#39;s&#34;, &#34;special_instructions&#34;: &#34;&#34;, &#34;personality_characteristics&#34;: [&#34;compassionate&#34;, &#34;patient&#34;, &#34;diligent&#34;, &#34;overwhelmed&#34;]}
{&#34;username&#34;: &#34;Giannis&#34;, &#34;age&#34;: 21, &#34;sex&#34;: &#34;male&#34;, &#34;sexual_orientation&#34;: &#34;Pansexual&#34;, &#34;demographic_group&#34;: &#34;White&#34;, &#34;current_employment&#34;: &#34;Game Developer&#34;, &#34;education_level&#34;: &#34;College&#34;, &#34;special_instructions&#34;: &#34;&#34;, &#34;personality_characteristics&#34;: [&#34;strategic&#34;, &#34;meticulous&#34;, &#34;nerdy&#34;, &#34;hyper-focused&#34;]}
</pre></div></div>
</div>
<p>Since creating a lot of distinct users is essential in running large-scale experiments, users are usually defined in JSON format. That way, you can change anything without touching your code!</p>
<p><a class="reference external" href="https://github.com/dimits-ts/synthetic_moderation_experiments/blob/master/data/discussions_input/personas/personas.json">Here</a> is an applied example of how to mass-define user personas through JSON files.</p>
</section>
<section id="Creating-the-user-agents">
<h3>Creating the user-agents<a class="headerlink" href="#Creating-the-user-agents" title="Link to this heading"></a></h3>
<p>Having a <code class="docutils literal notranslate"><span class="pre">persona</span></code> and a <code class="docutils literal notranslate"><span class="pre">model</span></code> we can finally create an <code class="docutils literal notranslate"><span class="pre">actor</span></code>. The actor will personify the selected persona using the model to talk.</p>
<p>Besides a persona and a model, the actors will also need instructions and a context. By convention, all actors share the same context, and all user-agents share the same instructions. Personalized instructions are defined in the actor’s persona.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">syndisco.actors</span><span class="w"> </span><span class="kn">import</span> <span class="n">Actor</span><span class="p">,</span> <span class="n">ActorType</span>


<span class="n">CONTEXT</span> <span class="o">=</span> <span class="s2">&quot;You are taking part in an online conversation&quot;</span>
<span class="n">INSTRUCTIONS</span> <span class="o">=</span> <span class="s2">&quot;Act like a human would&quot;</span>

<span class="n">actors</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">Actor</span><span class="p">(</span>
        <span class="n">model</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
        <span class="n">persona</span><span class="o">=</span><span class="n">p</span><span class="p">,</span>
        <span class="n">actor_type</span><span class="o">=</span><span class="n">ActorType</span><span class="o">.</span><span class="n">USER</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="n">CONTEXT</span><span class="p">,</span>
        <span class="n">instructions</span><span class="o">=</span><span class="n">INSTRUCTIONS</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">personas</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</section>
<section id="Managing-turn-taking">
<h3>Managing turn-taking<a class="headerlink" href="#Managing-turn-taking" title="Link to this heading"></a></h3>
<p>In real-life discussions, who gets to speak at each point in time is determined by complex social dynamics, which are difficult to realistically model. However, there are ways with which we can simulate these dynamics.</p>
<p>SynDisco uses the <code class="docutils literal notranslate"><span class="pre">TurnManager</span></code> class to model turn taking. Two implementations are available by default: Round Robin, and Random Weighted</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Round</span> <span class="pre">Robin</span></code> is the simplest, most intuitive way to model turn-taking; everyone gets to talk once per round. Once everyone talks once, they get to talk again in the same sequence</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">syndisco.turn_manager</span><span class="w"> </span><span class="kn">import</span> <span class="n">RoundRobin</span>


<span class="n">rrobin_turn_manager</span> <span class="o">=</span> <span class="n">RoundRobin</span><span class="p">([</span><span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;Mary&quot;</span><span class="p">,</span> <span class="s2">&quot;Howard&quot;</span><span class="p">,</span> <span class="s2">&quot;Todd&quot;</span><span class="p">])</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">rrobin_turn_manager</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
John
Mary
Howard
Todd
John
Mary
Howard
Todd
John
Mary
</pre></div></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">RandomWeighted</span></code> on the other hand throws a weighted coin on each round. If the coin flip succedes, the previous user gets to respond. If not, another user is selected at random</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">syndisco.turn_manager</span><span class="w"> </span><span class="kn">import</span> <span class="n">RandomWeighted</span>


<span class="n">rweighted_turn_manager</span> <span class="o">=</span> <span class="n">RandomWeighted</span><span class="p">(</span>
    <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;Mary&quot;</span><span class="p">,</span> <span class="s2">&quot;Howard&quot;</span><span class="p">,</span> <span class="s2">&quot;Todd&quot;</span><span class="p">],</span> <span class="n">p_respond</span><span class="o">=</span><span class="mf">0.5</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">rweighted_turn_manager</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Todd
Mary
Howard
John
Howard
Todd
Howard
Mary
Todd
John
</pre></div></div>
</div>
</section>
</section>
<section id="Generating-a-discussion">
<h2>Generating a discussion<a class="headerlink" href="#Generating-a-discussion" title="Link to this heading"></a></h2>
<p>Let’s start with the most basic task; a single discussion between two user-agents.</p>
<p>Since we only have two users, a RoundRobin approach where each user takes a turn sequentially is sufficient.</p>
<p>Now we can run a simple discussion</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">syndisco.jobs</span><span class="w"> </span><span class="kn">import</span> <span class="n">Discussion</span>


<span class="n">turn_manager</span> <span class="o">=</span> <span class="n">RoundRobin</span><span class="p">([</span><span class="n">actor</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="k">for</span> <span class="n">actor</span> <span class="ow">in</span> <span class="n">actors</span><span class="p">])</span>
<span class="n">conv</span> <span class="o">=</span> <span class="n">Discussion</span><span class="p">(</span><span class="n">next_turn_manager</span><span class="o">=</span><span class="n">turn_manager</span><span class="p">,</span> <span class="n">users</span><span class="o">=</span><span class="n">actors</span><span class="p">)</span>
<span class="n">conv</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
 20%|██        | 1/5 [00:02&lt;00:08,  2.05s/it]
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
User Emma35 posted:
I&#39;m happy to chat with you. How&#39;s your day going so far?

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
 40%|████      | 2/5 [00:05&lt;00:08,  2.90s/it]
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
User Giannis posted:
It&#39;s going alright, I guess. Been stuck on this game bug for a while
now and I&#39;m trying to figure out why it&#39;s not compiling as expected.
But, other than that, I&#39;m good. How about you, how&#39;s your day going?

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
 60%|██████    | 3/5 [00:10&lt;00:07,  3.80s/it]
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
User Emma35 posted:
It&#39;s been a busy day for me. I&#39;ve been juggling multiple patients and
trying to keep up with their needs. I love my job as a registered
nurse, but some days are definitely more chaotic than others. I&#39;ve
been feeling a bit overwhelmed, to be honest. How about you, have you
found any solutions to that game bug you&#39;ve been stuck on?

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
 80%|████████  | 4/5 [00:16&lt;00:04,  4.84s/it]
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
User Giannis posted:
I totally understand the feeling of being overwhelmed. As a game
developer, I&#39;m used to juggling multiple tasks and deadlines, but it&#39;s
not always easy. I&#39;ve been working on this bug for a while now, and I
think I might have found the issue. It seems like a subtle one, but
it&#39;s been causing some inconsistencies in the game&#39;s physics engine.
I&#39;m just hoping I can squash it before the next patch.  But, I&#39;m
curious, what kind of patients are you

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
100%|██████████| 5/5 [00:23&lt;00:00,  4.68s/it]
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
User Emma35 posted:
I work in a busy hospital, so I&#39;m constantly surrounded by patients
with all sorts of medical needs. There&#39;s the elderly gentleman who&#39;s
recovering from a hip replacement surgery, the young mom who&#39;s having
trouble with her newborn&#39;s reflux, and the patient who&#39;s dealing with
a chronic illness that requires constant monitoring. It&#39;s a lot to
handle, but I love the feeling of making a difference in their lives.
Speaking of which, I did have a patient who was really grateful for my
care today

</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>

</pre></div></div>
</div>
<p>Let’s add a moderator to oversee the discussion.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">MODERATOR_INSTRUCTIONS</span> <span class="o">=</span> <span class="s2">&quot;You are a moderator. Oversee the discussion&quot;</span>

<span class="n">moderator_persona</span> <span class="o">=</span> <span class="n">Persona</span><span class="p">(</span>
    <span class="o">**</span><span class="p">{</span>
        <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;Moderator&quot;</span><span class="p">,</span>
        <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">41</span><span class="p">,</span>
        <span class="s2">&quot;sex&quot;</span><span class="p">:</span> <span class="s2">&quot;male&quot;</span><span class="p">,</span>
        <span class="s2">&quot;education_level&quot;</span><span class="p">:</span> <span class="s2">&quot;PhD&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sexual_orientation&quot;</span><span class="p">:</span> <span class="s2">&quot;Pansexual&quot;</span><span class="p">,</span>
        <span class="s2">&quot;demographic_group&quot;</span><span class="p">:</span> <span class="s2">&quot;White&quot;</span><span class="p">,</span>
        <span class="s2">&quot;current_employment&quot;</span><span class="p">:</span> <span class="s2">&quot;Moderator&quot;</span><span class="p">,</span>
        <span class="s2">&quot;special_instructions&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;personality_characteristics&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;strict&quot;</span><span class="p">,</span>
            <span class="s2">&quot;neutral&quot;</span><span class="p">,</span>
            <span class="s2">&quot;just&quot;</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="n">moderator</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="n">llm</span><span class="p">,</span>
    <span class="n">persona</span><span class="o">=</span><span class="n">moderator_persona</span><span class="p">,</span>
    <span class="n">actor_type</span><span class="o">=</span><span class="n">ActorType</span><span class="o">.</span><span class="n">USER</span><span class="p">,</span>
    <span class="n">context</span><span class="o">=</span><span class="n">CONTEXT</span><span class="p">,</span>
    <span class="n">instructions</span><span class="o">=</span><span class="n">MODERATOR_INSTRUCTIONS</span>
<span class="p">)</span>

<span class="c1"># remember to update this!</span>
<span class="n">turn_manager</span> <span class="o">=</span> <span class="n">RoundRobin</span><span class="p">(</span>
    <span class="p">[</span><span class="n">actor</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="k">for</span> <span class="n">actor</span> <span class="ow">in</span> <span class="n">actors</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">moderator</span><span class="o">.</span><span class="n">get_name</span><span class="p">()]</span>
<span class="p">)</span>
<span class="n">conv</span> <span class="o">=</span> <span class="n">Discussion</span><span class="p">(</span>
    <span class="n">next_turn_manager</span><span class="o">=</span><span class="n">turn_manager</span><span class="p">,</span>
    <span class="n">users</span><span class="o">=</span><span class="n">actors</span> <span class="o">+</span> <span class="p">[</span><span class="n">moderator</span><span class="p">],</span>
    <span class="n">moderator</span><span class="o">=</span><span class="n">moderator</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">conv</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
  0%|          | 0/5 [00:00&lt;?, ?it/s]
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
User Emma35 posted:
I&#39;m happy to chat with you. How&#39;s your day going so far?

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
 20%|██        | 1/5 [00:04&lt;00:17,  4.40s/it]
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
User Moderator posted:
User Emma35, thanks for the friendly greeting. As a moderator, I don&#39;t
really have personal experiences or emotions, but I&#39;m functioning
properly and ready to assist with any topics you&#39;d like to discuss.
What&#39;s on your mind?

User Giannis posted:
Thanks for the warm welcome, Emma! I&#39;m glad to be here. As for me,
it&#39;s been a pretty typical day of working on some new game mechanics
and debugging code. I&#39;m really excited about the project I&#39;m currently
working on, but it&#39;s been a bit of a challenge to get everything just
right. I&#39;ve been spending most of my free time playing some strategy
games to get my mind warmed up, actually. I&#39;m a bit of a nerd, so I
love that kind

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
 40%|████      | 2/5 [00:14&lt;00:23,  7.88s/it]
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
User Moderator posted:
User Giannis, it&#39;s great to hear that you&#39;re working on a new project
and debugging code can be a challenging but rewarding experience. What
specific areas of the game mechanics are you finding tricky to get
right, and are there any particular strategies or techniques you&#39;re
using to overcome those challenges?

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
You seem to be using the pipelines sequentially on GPU. In order to maximize efficiency please use a dataset
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
User Moderator posted:
User Giannis, debugging code can indeed be a complex process. Can you
tell us more about the specific areas of the game mechanics that
you&#39;re struggling with? Are there any particular issues or bugs that
you&#39;re having trouble resolving?

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
 60%|██████    | 3/5 [00:21&lt;00:14,  7.36s/it]
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
User Moderator posted:
User Giannis, you mentioned that you&#39;re working on some new game
mechanics and debugging code. Can you provide more details on the
specific areas that are giving you trouble? Are you experiencing any
issues with balance, gameplay, or perhaps something else?

User Emma35 posted:
I&#39;d love to hear more about your project, Giannis. As a nurse, I&#39;m
always fascinated by the creative and technical aspects of game
development. I&#39;m sure it&#39;s not easy to balance gameplay and mechanics,
especially when trying to make everything just right.  I&#39;ve always
been impressed by the complexity of game development, and I&#39;m sure
it&#39;s not unlike the intricacies of patient care - sometimes you have
to think outside the box to come up with a solution that works for
everyone. What

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
 80%|████████  | 4/5 [00:34&lt;00:09,  9.63s/it]
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
User Moderator posted:
User Giannis, thank you for sharing more about your project. It sounds
like you&#39;re facing some interesting challenges in terms of balancing
gameplay and mechanics. Can you tell us a bit more about what specific
areas you&#39;re struggling with? For example, are you having trouble with
character movement, puzzle-solving, or perhaps something else?  Also,
I&#39;d like to invite Emma35 to continue the conversation. As a nurse,
her perspective on the complexities of balancing multiple systems and
finding solutions that work for everyone is

User Giannis posted:
Thanks for having me, Moderator. I&#39;m happy to share more about my
project. To be honest, I&#39;m having a bit of trouble with the balance
between exploration and combat mechanics. I want the player to feel
like they can explore the world without feeling overwhelmed by the
combat system, but at the same time, I want the combat to be
challenging and rewarding.  Specifically, I&#39;m struggling with finding
the right ratio of exploration time to combat time. If the player
spends too much time fighting,

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
100%|██████████| 5/5 [00:47&lt;00:00,  9.56s/it]
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
User Moderator posted:
User Moderator posted: User Giannis, that&#39;s a great starting point.
Balancing exploration and combat can be a delicate dance. Can you tell
us more about what you&#39;ve tried so far to achieve this balance? For
example, have you experimented with different combat mechanics, such
as difficulty scaling, enemy AI, or player abilities? Have you also
considered implementing a &#34;rest&#34; or &#34;regeneration&#34; system to give
players a break from combat? We&#39;d also like to hear from Emma35, who

</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>

</pre></div></div>
</div>
<section id="Saving-a-discussion-to-the-disk">
<h3>Saving a discussion to the disk<a class="headerlink" href="#Saving-a-discussion-to-the-disk" title="Link to this heading"></a></h3>
<p>It’s best practice to save the results of each discussion after it has concluded. This way, no matter what happens to the program executing the discussions, progress will be checkpointed.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Discussion</span></code> class provides a method for saving its logs and related metadata to a JSON file:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">tempfile</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>

<span class="n">tp</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">NamedTemporaryFile</span><span class="p">(</span><span class="n">delete</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">conv</span><span class="o">.</span><span class="n">to_json_file</span><span class="p">(</span><span class="n">tp</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="c1"># if you are running this on Windows, uncomment this line</span>
<span class="c1"># tp.close()</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">tp</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{
  &#34;id&#34;: &#34;88dc8d0b-8976-45a8-bda1-c15ed7d75450&#34;,
  &#34;timestamp&#34;: &#34;25-11-17-15-13&#34;,
  &#34;users&#34;: [
    &#34;Emma35&#34;,
    &#34;Giannis&#34;,
    &#34;Moderator&#34;
  ],
  &#34;moderator&#34;: &#34;Moderator&#34;,
  &#34;user_prompts&#34;: [
    {
      &#34;context&#34;: &#34;You are taking part in an online conversation&#34;,
      &#34;instructions&#34;: &#34;Act like a human would&#34;,
      &#34;type&#34;: &#34;1&#34;,
      &#34;persona&#34;: {
        &#34;username&#34;: &#34;Emma35&#34;,
        &#34;age&#34;: 38,
        &#34;sex&#34;: &#34;female&#34;,
        &#34;sexual_orientation&#34;: &#34;Heterosexual&#34;,
        &#34;demographic_group&#34;: &#34;Latino&#34;,
        &#34;current_employment&#34;: &#34;Registered Nurse&#34;,
        &#34;education_level&#34;: &#34;Bachelor&#39;s&#34;,
        &#34;special_instructions&#34;: &#34;&#34;,
        &#34;personality_characteristics&#34;: [
          &#34;compassionate&#34;,
          &#34;patient&#34;,
          &#34;diligent&#34;,
          &#34;overwhelmed&#34;
        ]
      }
    },
    {
      &#34;context&#34;: &#34;You are taking part in an online conversation&#34;,
      &#34;instructions&#34;: &#34;Act like a human would&#34;,
      &#34;type&#34;: &#34;1&#34;,
      &#34;persona&#34;: {
        &#34;username&#34;: &#34;Giannis&#34;,
        &#34;age&#34;: 21,
        &#34;sex&#34;: &#34;male&#34;,
        &#34;sexual_orientation&#34;: &#34;Pansexual&#34;,
        &#34;demographic_group&#34;: &#34;White&#34;,
        &#34;current_employment&#34;: &#34;Game Developer&#34;,
        &#34;education_level&#34;: &#34;College&#34;,
        &#34;special_instructions&#34;: &#34;&#34;,
        &#34;personality_characteristics&#34;: [
          &#34;strategic&#34;,
          &#34;meticulous&#34;,
          &#34;nerdy&#34;,
          &#34;hyper-focused&#34;
        ]
      }
    },
    {
      &#34;context&#34;: &#34;You are taking part in an online conversation&#34;,
      &#34;instructions&#34;: &#34;You are a moderator. Oversee the discussion&#34;,
      &#34;type&#34;: &#34;1&#34;,
      &#34;persona&#34;: {
        &#34;username&#34;: &#34;Moderator&#34;,
        &#34;age&#34;: 41,
        &#34;sex&#34;: &#34;male&#34;,
        &#34;sexual_orientation&#34;: &#34;Pansexual&#34;,
        &#34;demographic_group&#34;: &#34;White&#34;,
        &#34;current_employment&#34;: &#34;Moderator&#34;,
        &#34;education_level&#34;: &#34;PhD&#34;,
        &#34;special_instructions&#34;: &#34;&#34;,
        &#34;personality_characteristics&#34;: [
          &#34;strict&#34;,
          &#34;neutral&#34;,
          &#34;just&#34;
        ]
      }
    }
  ],
  &#34;moderator_prompt&#34;: {
    &#34;context&#34;: &#34;You are taking part in an online conversation&#34;,
    &#34;instructions&#34;: &#34;You are a moderator. Oversee the discussion&#34;,
    &#34;type&#34;: &#34;1&#34;,
    &#34;persona&#34;: {
      &#34;username&#34;: &#34;Moderator&#34;,
      &#34;age&#34;: 41,
      &#34;sex&#34;: &#34;male&#34;,
      &#34;sexual_orientation&#34;: &#34;Pansexual&#34;,
      &#34;demographic_group&#34;: &#34;White&#34;,
      &#34;current_employment&#34;: &#34;Moderator&#34;,
      &#34;education_level&#34;: &#34;PhD&#34;,
      &#34;special_instructions&#34;: &#34;&#34;,
      &#34;personality_characteristics&#34;: [
        &#34;strict&#34;,
        &#34;neutral&#34;,
        &#34;just&#34;
      ]
    }
  },
  &#34;ctx_length&#34;: 5,
  &#34;logs&#34;: [
    {
      &#34;name&#34;: &#34;Emma35&#34;,
      &#34;text&#34;: &#34;I&#39;m happy to chat with you. How&#39;s your day going so far?&#34;,
      &#34;model&#34;: &#34;test_model&#34;
    },
    {
      &#34;name&#34;: &#34;Moderator&#34;,
      &#34;text&#34;: &#34;User Emma35, thanks for the friendly greeting. As a moderator, I don&#39;t really have personal experiences or emotions, but I&#39;m functioning properly and ready to assist with any topics you&#39;d like to discuss. What&#39;s on your mind?&#34;,
      &#34;model&#34;: &#34;test_model&#34;
    },
    {
      &#34;name&#34;: &#34;Giannis&#34;,
      &#34;text&#34;: &#34;Thanks for the warm welcome, Emma! I&#39;m glad to be here. As for me, it&#39;s been a pretty typical day of working on some new game mechanics and debugging code. I&#39;m really excited about the project I&#39;m currently working on, but it&#39;s been a bit of a challenge to get everything just right. I&#39;ve been spending most of my free time playing some strategy games to get my mind warmed up, actually. I&#39;m a bit of a nerd, so I love that kind&#34;,
      &#34;model&#34;: &#34;test_model&#34;
    },
    {
      &#34;name&#34;: &#34;Moderator&#34;,
      &#34;text&#34;: &#34;User Giannis, it&#39;s great to hear that you&#39;re working on a new project and debugging code can be a challenging but rewarding experience. What specific areas of the game mechanics are you finding tricky to get right, and are there any particular strategies or techniques you&#39;re using to overcome those challenges?&#34;,
      &#34;model&#34;: &#34;test_model&#34;
    },
    {
      &#34;name&#34;: &#34;Moderator&#34;,
      &#34;text&#34;: &#34;User Giannis, debugging code can indeed be a complex process. Can you tell us more about the specific areas of the game mechanics that you&#39;re struggling with? Are there any particular issues or bugs that you&#39;re having trouble resolving?&#34;,
      &#34;model&#34;: &#34;test_model&#34;
    },
    {
      &#34;name&#34;: &#34;Moderator&#34;,
      &#34;text&#34;: &#34;User Giannis, you mentioned that you&#39;re working on some new game mechanics and debugging code. Can you provide more details on the specific areas that are giving you trouble? Are you experiencing any issues with balance, gameplay, or perhaps something else?&#34;,
      &#34;model&#34;: &#34;test_model&#34;
    },
    {
      &#34;name&#34;: &#34;Emma35&#34;,
      &#34;text&#34;: &#34;I&#39;d love to hear more about your project, Giannis. As a nurse, I&#39;m always fascinated by the creative and technical aspects of game development. I&#39;m sure it&#39;s not easy to balance gameplay and mechanics, especially when trying to make everything just right.\n\nI&#39;ve always been impressed by the complexity of game development, and I&#39;m sure it&#39;s not unlike the intricacies of patient care - sometimes you have to think outside the box to come up with a solution that works for everyone. What&#34;,
      &#34;model&#34;: &#34;test_model&#34;
    },
    {
      &#34;name&#34;: &#34;Moderator&#34;,
      &#34;text&#34;: &#34;User Giannis, thank you for sharing more about your project. It sounds like you&#39;re facing some interesting challenges in terms of balancing gameplay and mechanics. Can you tell us a bit more about what specific areas you&#39;re struggling with? For example, are you having trouble with character movement, puzzle-solving, or perhaps something else?\n\nAlso, I&#39;d like to invite Emma35 to continue the conversation. As a nurse, her perspective on the complexities of balancing multiple systems and finding solutions that work for everyone is&#34;,
      &#34;model&#34;: &#34;test_model&#34;
    },
    {
      &#34;name&#34;: &#34;Giannis&#34;,
      &#34;text&#34;: &#34;Thanks for having me, Moderator. I&#39;m happy to share more about my project. To be honest, I&#39;m having a bit of trouble with the balance between exploration and combat mechanics. I want the player to feel like they can explore the world without feeling overwhelmed by the combat system, but at the same time, I want the combat to be challenging and rewarding.\n\nSpecifically, I&#39;m struggling with finding the right ratio of exploration time to combat time. If the player spends too much time fighting,&#34;,
      &#34;model&#34;: &#34;test_model&#34;
    },
    {
      &#34;name&#34;: &#34;Moderator&#34;,
      &#34;text&#34;: &#34;User Moderator posted:\nUser Giannis, that&#39;s a great starting point. Balancing exploration and combat can be a delicate dance. Can you tell us more about what you&#39;ve tried so far to achieve this balance? For example, have you experimented with different combat mechanics, such as difficulty scaling, enemy AI, or player abilities? Have you also considered implementing a \&#34;rest\&#34; or \&#34;regeneration\&#34; system to give players a break from combat? We&#39;d also like to hear from Emma35, who&#34;,
      &#34;model&#34;: &#34;test_model&#34;
    }
  ]
}
</pre></div></div>
</div>
<p>Congratulations, you can now run fully synthetic discussions! You may want to experiment with adding more than 2 users or testing more realistic turn taking procedures (for example, check out the <code class="docutils literal notranslate"><span class="pre">RandomWeighted</span></code> turn manager).</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Dimitris Tsirmpas.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>